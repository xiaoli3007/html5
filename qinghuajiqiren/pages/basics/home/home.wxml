
 <view id='home_main'>

<cu-custom bgColor="bg-gradual-blue">
  <view slot="content">诗小图</view>
</cu-custom>

  <view class="cu-bar bg-blue  solid-bottom">
    <view class="action">
      <text class="cuIcon-title text-white "></text> 相关知识
    </view>
  </view>
 
 <view class="padding-sm flex flex-wrap">
  <view class="padding-xs"  >
    <view class="cu-tag bg-blue light">李白</view>
  </view>
  <view class="padding-xs"  >
    <view class="cu-tag bg-blue light">杜甫</view>
  </view>
  <view class="padding-xs"  >
    <view class="cu-tag bg-blue light">白居易</view>
  </view>
  <view class="padding-xs"  >
    <view class="cu-tag bg-blue light">成都</view>
  </view>
</view>

<view class="padding flex flex-direction">
 
  <button class="cu-btn bg-grey lg"  bindtap="gotoPage1">生成图谱</button>
   
</view>

  <view class="cu-bar bg-blue   solid-bottom">
    <view class="action">
      <text class="cuIcon-title text-white "></text> 聊天
    </view>
  </view>
  <scroll-view scroll-y style="height: 290px;" bindscrolltoupper="upper" bindscrolltolower="lower" bindscroll="scroll" scroll-into-view="{{toView}}" >
<view class="cu-chat">

 <block wx:key wx:for='{{msgList}}' wx:for-index="index">

        <view class="cu-item self" wx:if='{{item.speaker=="self"}}' id='msg-{{index}}'>
    <view class="main">
      <view class="content bg-green shadow">
       {{item.content}}
      </view>
    </view>
    <view class="cu-avatar radius" wx:if='{{hasUserInfo}}' style="background-image:url({{userInfo.avatarUrl}});"></view>

    <view class="cu-avatar radius" wx:if='{{!hasUserInfo}}'>
    <text class="cuIcon-people"></text>
    </view>

    <view class="date">{{item.time}}</view>
  </view>

  <view class="cu-item" wx:if='{{item.speaker=="server"}}' id='msg-{{index}}'>
    <view class="cu-avatar radius shixiaotu-bg"></view>
    <view class="main">
      <view class="content shadow">
      {{item.content}}
      </view>      
    </view>
    <view class="date">{{item.time}}</view>
  </view>
   

    </block>



  
</view>

  </scroll-view>

<view class="cu-bar foot input {{InputBottom!=0?'cur':''}}" style="bottom:{{InputBottom}}px">
 
  <input class="solid-bottom" bindfocus="InputFocus" bindblur="InputBlur" adjust-position="{{false}}" focus="{{false}}" maxlength="300" cursor-spacing="10"  bindinput="bindKeyInput" value='{{msgdata}}'></input>

  <button class="cu-btn bg-green shadow" bindtap="sendmsg">发送</button>
</view>

</view>